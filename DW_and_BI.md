<!-- TOC START min:1 max:4 link:true update:true -->
- [<center> 数据仓库（DW）与商业智能（BI） </center>](#-数据仓库dw与商业智能bi-)
  - [数据仓库 （Data Warehouse）](#数据仓库-data-warehouse)
    - [数据仓库的特点](#数据仓库的特点)
    - [数据库类型](#数据库类型)
      - [关系型数据库](#关系型数据库)
      - [非关系型数据](#非关系型数据)
      - [分布式数据库](#分布式数据库)
    - [数据仓库的集成性--ETL](#数据仓库的集成性--etl)
      - [常用的ETL工具](#常用的etl工具)
      - [ETL工具技术架构](#etl工具技术架构)
      - [数据抽取方式](#数据抽取方式)
      - [数据的多样性](#数据的多样性)
    - [数据仓库的主题性--数据汇总统计](#数据仓库的主题性--数据汇总统计)
    - [数据仓库的时变性--构建特殊表](#数据仓库的时变性--构建特殊表)
  - [商业智能 （Business Intelligence）](#商业智能-business-intelligence)

<!-- TOC END -->



# <center> 数据仓库（DW）与商业智能（BI） </center>
## 数据仓库 （Data Warehouse）
### 数据仓库的特点
&emsp; &emsp; 数据处理大致可以分成两大类：联机事务处理OLTP（on-line transaction processing）、联机分析处理OLAP（On-Line Analytical Processing）。OLTP是传统的关系型数据库的主要应用，主要是基本的、日常的事务处理，例如银行交易。OLAP是数据仓库系统的主要应用，支持复杂的分析操作，侧重决策支持，并且提供直观易懂的查询结果。
OLTP与OLAP之间的比较：</br>

| 特性 | OLTP | OLAP |
| :------: | :------: | :------: |
| 特征 | 操作处理 | 信息处理 |
| 面向 | 事务 | 分析 |
|用户 | 办事员、DBA、数据库专业人员 | 知识工人（如分析员、主管、经理）|
|功能 | 日常操作 | 长期信息需求和决策支持|
|DB设计 | 基于E-R，面向应用 | 星型和雪花型，面向主题|
|数据 | 当前的，确保最新 | 历史的，跨时间维护|
|粒度 | 原始的，高度详细 | 汇总的，统一的|
|视图 | 详细，一般关系 | 汇总的，多维的|
|工作单位 | 简单的事务 | 复杂的查询|
|存取 | 读写 | 大多为读|
|关注 | 数据进入 | 信息输出|
|操作 | 主关键字上索引/散列 | 大量扫描|
|访问记录 | 数十个 | 数百万|
|用户数 | 数千 | 数百|
|DB规模 | 100MB-GB| 100GB-TB|
|度量 | 事务吞吐量 | 查询吞吐量。响应时间|
|时间要求 | 具有实时性 | 对时间要求不严格|
|主要应用 | 数据库 | 数据仓库|

&emsp; &emsp; 数据仓库的主要4个特点：<br>
1、**主题性** <br>
&emsp; 数据仓库是一般从用户实际需求出发，将不同平台的数据源按设定主题进行划分整合，与传统的面向事务的操作型数据库不同，具有较高的抽象性。面向主题的数据组织方式，就是在较高层次对分析对象数据的一个完整、统一并一致的描述，能完整及统一地刻画各个分析对象所涉及的有关企业的各项数据，以及数据之间的联系。

2．**集成性** <br>
&emsp; 数据仓库中存储的数据大部分来源于传统的数据库，但并不是将原有数据简单的直接导入，而是需要进行预处理。这是因为事务型数据中的数据一般都是有噪声的、不完整的和数据形式不统一的。这些“脏数据”的直接导入将对在数据仓库基础上进行的数据挖掘造成混乱。“脏数据”在进入数据仓库之前必须经过抽取、清洗、转换才能生成从面向事务转而面向主题的数据集合。数据集成是数据仓库建设中最重要，也是最为复杂的一步。

3．**稳定性** <br>
&emsp; 数据仓库中的数据主要为决策者分析提供数据依据。决策依据的数据是不允许进行修改的。即数据保存到数据仓库后，用户仅能通过分析工具进行查询和分析，而不能修改。数据的更新升级主要都在数据集成环节完成，过期的数据将在数据仓库中直接筛除。

4．**动态性（时变性）** <br>
&emsp; 数据仓库数据会随时间变化而定期更新，不可更新是针对应用而言，即用户分析处理时不更新数据。每隔一段固定的时间间隔后，抽取运行数据库系统中产生的数据，转换后集成到数据仓库中。随着时间的变化，数据以更高的综合层次被不断综合，以适应趋势分析的要求。当数据超过数据仓库的存储期限，或对分析无用时，从数据仓库中删除这些数据。关于数据仓库的结构和维护信息保存在数据仓库的元数据(Metadata)中，数据仓库维护工作由系统根据其中的定义自动进行或由系统管理员定期维护。

### 数据库类型
&emsp; &emsp; 无论是联机事务处理还是联机分析处理都需要先存储好数据，从数据记录在石头、竹片到记录到纸张，再到现在记录在电子设备上。这些都是数据存储的载体，而数据存在在电子设备也有很多方式，例如文件，图片，视频等方式。为了更加规范数据的存储和读取，数据库以一定方式储存在一起、能与多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合
#### 关系型数据库
&emsp; &emsp; 常用的关系型数据库有及特点：<br>
1、**MySQL** <br>
&emsp; &emsp; MySQL是最受欢迎的开源SQL数据库管理系统，MySQL是一个快速的、多线程、多用户和健壮的SQL数据库服务器。MySQL服务器支持关键任务、重负载生产系统的使用，也可以将它嵌入到一个大配置(mass- deployed)的软件中去。
与其他数据库管理系统相比，*MySQL具有以下优势*：<br>
　　(1)MySQL是一个关系数据库管理系统。<br>
　　(2)MySQL是开源的。<br>
　　(3)MySQL服务器是一个快速的、可靠的和易于使用的数据库服务器。<br>
　　(4)MySQL服务器工作在客户/服务器或嵌入系统中。<br>
　　(5)有大量的MySQL软件可以使用。<br>

2、**Oracle** <br>
&emsp; &emsp; Oracle在数据库领域一直处于领先地位。 1984年，首先将关系数据库转到了桌面计算机上。然后，Oracle5率先推出了分布式数据库、客户/服务器结构等崭新的概念。Oracle 6首创行锁定模式以及对称多处理计算机的支持，最新的Oracle 8主要增加了对象技术，成为关系—对象数据库系统。目前，Oracle产品覆盖了大、中、小型机等几十种机型，Oracle数据库成为世界上使用最广泛的关系数据系统之一。<br>
*Oracle数据库产品具有以下优良特性:*<br>
　　(1)兼容性：Oracle产品采用标准SQL，并经过美国国家标准技术所(NIST)测试。与IBM SQL/DS、DB2、INGRES、IDMS/R等兼容。<br>
　　(2)可移植性：Oracle的产品可运行于很宽范围的硬件与操作系统平台上。可以安装在70种以上不同的大、中、小型机上；可在VMS、DOS、UNIX、Windows等多种操作系统下工作。<br>
　　(3)可联结性：Oracle能与多种通讯网络相连，支持各种协议(TCP/IP、DECnet、LU6.2等)。<br>
　　(4)高生产率：Oracle产品提供了多种开发工具，能极大地方便用户进行进一步的开发。<br>
　　(5)开放性：Oracle良好的兼容性、可移植性、可连接性和高生产率使Oracle RDBMS具有良好的开放性。

3、**SQL Server** <br>
&emsp; &emsp; SQL Server是由微软开发的数据库管理系统，是Web上最流行的用于存储数据的数据库，它已广泛用于电子商务、银行、保险、电力等与数据库有关的行业。<br>
*优点：*<br>
　　(1) 易用性、适合分布式组织的可伸缩性、用于决策支持的数据仓库功能、与许多其他服务器软件紧密关联的集成性、良好的性价比等；<br>
　　(2) 为数据管理与分析带来了灵活性，允许单位在快速变化的环境中从容响应，从而获得竞争优势。从数据管理和分析角度看，将原始数据转化为商业智能和充分利用Web带来的机会非常重要。作为一个完备的数据库和数据分析包，SQLServer为快速开发新一代企业级商业应用程序、为企业赢得核心竞争优势打开了胜利之门。作为重要的基准测试可伸缩性和速度奖的记录保持者，SQLServer是一个具备完全Web支持的数据库产品，提供了对可扩展标记语言 (XML)的核心支持以及在Internet上和防火墙外进行查询的能力；

*缺点：*<br>
　　(1) 开放性 ：SQL Server 只能windows上运行没有丝毫开放性操作系统系统稳定对数据库十分重要Windows9X系列产品偏重于桌面应用NT server只适合小型企业而且windows平台靠性安全性和伸缩性非常有限象unix样久经考验尤其处理大数据库；<br>
　　(2) 伸缩性并行性 ：SQL server 并行实施和共存模型并成熟难处理日益增多用户数和数据卷伸缩性有限；<br>
　　(3) 安全性：没有获得任何安全证书。<br>
　　(4) 性能 ：SQL Server 多用户时性能佳 ；<br>
　　(5) 客户端支持及应用模式： 客户端支持及应用模式。只支持C/S模式，SQL Server C/S结构只支持windows客户用ADO、DAO、OLEDB、ODBC连接；<br>
　　(6) 使用风险：SQL server 完全重写代码经历了长期测试断延迟许多功能需要时间来证明并十分兼容；

4、**DB2** <br>
&emsp; &emsp; DB2是内嵌于IBM的AS/400系统上的数据库管理系统，直接由硬件支持。它支持标准的SQL语言，具有与异种数据库相连的GATEWAY。因此它具有速度快、可靠性好的优点。但是，只有硬件平台选择了IBM的AS/400，才能选择使用DB2数据库管理系统。<br>
&emsp; &emsp; DB2能在所有主流平台上运行(包括Windows)，最适于海量数据。<br>
&emsp; &emsp; DB2在企业级的应用最为广泛，在全球的500家最大的企业中，几乎85%以上都用DB2数据库服务器，而国内到1997年约占5%。

5、**PostgreSQL** <br>
&emsp; &emsp; PostgreSQL 是最先进的开放源码的数据库系统， 它提供了多版本并行控制，支持几乎所有 SQL 构件(包括子查询，事务和用户定 义类型和函数)， 并且可以获得非常广阔范围的(开发)语言绑定 (包括 C，C++，Java，perl，tcl，和 python)。*具体的优点特性如下：*<br>
　　(1) PostgreSQL 的稳定性极强， Innodb 等引擎在崩溃、断电之类的灾难场景下抗打击能力有了长足进步；<br>
　　(2) PG 性能高速度快。任何系统都有它的性能极限，在高并发读写，负载逼近极限下，PG的性能指标仍可以维持双曲线甚至对数曲线，到顶峰之后不再下降；<br>
　　(3) PG 多年来在 GIS 领域处于优势地位，因为它有丰富的几何类型，实际上不止几何类型，PG有大量字典、数组、bitmap 等数据类型；<br>
　　(4) PG 的“无锁定”特性非常突出，甚至包括 vacuum 这样的整理数据空间的操作，这个和PGSQL的MVCC实现有关系。PostgreSQL 是唯一支持事务、子查询、多版本并行控制系统、数据完整性检查等特性的唯一的一种自由软件的数据库管理系统；<br>
　　(5) PG对数据量大的文本以及SQL处理较快,可以使用函数和条件索引，这使得PG数据库的调优非常灵活。

*PostgreSQL的缺点：*<br>
　　(1) 关于mvcc 的多版本控制。会生成很多个版本。定期要清理；<br>
　　(2) pg的分布式集群。bug很多实用需要谨慎；<br>
　　(3) pg数据库的并发性问题：pg采用抢占资源的方式，如果有一个大的SQL在跑，可能就会阻塞其他的进程，不管其他的进程是小SQL还是大SQL。好在pg有个优先级设置，还能变通一下；<br>
　　(4) pg的数据库扩容问题：扩容花费的时间很长；<br>
　　(5) pg的segment和mirror同步问题：某个实例有问题，如果是在线恢复，特别慢。 如果把所有的应用停掉则速度还算可以。

#### 非关系型数据
1、**MongoDB** <br>
&emsp; &emsp; MongoDB是一个基于分布式文件存储的数据库。由C++语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。MongoDB是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。它支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。<br>
　　*(1) 实用性* <br>
&emsp;&emsp; MongoDB是一个面向文档的数据库，它并不是关系型数据库，直接存取BSON，这意味着MongoDB更加灵活，因为可以在文档中直接插入数组之类的复杂数据类型，并且文档的key和value不是固定的数据类型和大小，所以开发者在使用MongoDB时无须预定义关系型数据库中的”表”等数据库对象，设计数据库将变得非常方便，可以大大地提升开发进度。<br>
　　*(2) 可用性和负载均衡* <br>
&emsp;&emsp; MongoDB在高可用和读负载均衡上的实现非常简洁和友好，MongoDB自带了副本集的概念，通过设计适合自己业务的副本集和驱动程序，可以非常有效和方便地实现高可用，读负载均衡。而在其他数据库产品中想实现以上功能，往往需要额外安装复杂的中间件，大大提升了系统复杂度，故障排查难度和运维成本。 <br>
　　*(3) 扩展性* <br>
&emsp;&emsp;在扩展性方面，假设应用数据增长非常迅猛的话，通过不断地添加磁盘容量和内存容量往往是不现实的，而手工的分库分表又会带来非常繁重的工作量和技术复杂度。在扩展性上，MongoDB有非常有效的，现成的解决方案。通过自带的Mongos集群，只需要在适当的时候继续添加Mongo分片，就可以实现程序段自动水平扩展和路由，一方面缓解单个节点的读写压力，另外一方面可有效地均衡磁盘容量的使用情况。整个mongos集群对应用层完全透明，并可完美地做到各个Mongos集群组件的高可用性。 <br>
　　*(4) 数据压缩* <br>
&emsp;&emsp;自从MongoDB 3.0推出以后，MongoDB引入了一个高性能的存储引擎WiredTiger，并且它在数据压缩性能上得到了极大的提升，跟之前的MMAP引擎相比，压缩比至少可增加5倍以上，可以极大地改善磁盘空间使用率。 <br>
　　*(5) 其他特性* <br>
&emsp;&emsp;相比其他关系型数据库，MongoDB引入了”固定集合”的概念。所谓固定集合，就是指整个集合的大小是预先定义并固定的，内部就是一个循环队列，假如集合满了，MongoDB后台会自动去清理旧数据，并且由于每次都是写入固定空间，可大大地提升写入速度。这个特性就非常适用于日志型应用，不用再去纠结日志疯狂增长的清理措施和写入效率问题。另外需要更加精细的淘汰策略设置，还可以使用TTL索引(time-to-liveindex)，即具有生命周期的索引，它允许为每条记录设置一个过期时间，当某条记录达到它的设置条件时可被自动删除。 <br>
&emsp;&emsp;在某些LBS的应用中，使用MongoDB也有非常巨大的优势。MongoDB支持多种类型的地理空间索引，支持多种不同类型的地理空间查询，比如intersection，within和nearness等。 <br>
　　*(6) MongoDB不适用的应用场景* <br>
&emsp;&emsp;在某些场景下，MongoDB作为一个非关系型数据库有其局限性。MongoDB不支持事务操作，所以需要用到事务的应用建议不用MongoDB，另外MongoDB目前不支持join操作，需要复杂查询的应用也不建议使用MongoDB。

2、**redis** <br>
&emsp;&emsp;redis是一个key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hash（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。

&emsp;&emsp; *优点：* <br>
　　(1) 速度快，因为数据存在内存中，类似于HashMap，HashMap的优势就是查找和操作的时间复杂度都是O(1)<br>
　　(2) 支持丰富数据类型，支持string，list，set，sorted set，hash<br>
　　(3) 支持事务，操作都是原子性，所谓的原子性就是对数据的更改要么全部执行，要么全部不执行<br>
　　(4) 丰富的特性：可用于缓存，消息，按key设置过期时间，过期后将会自动删除

&emsp;&emsp; *缺点：* <br>
　　(1) Redis不具备自动容错和恢复功能，主机从机的宕机都会导致前端部分读写请求失败，需要等待机器重启或者手动切换前端的IP才能恢复。 <br>
　　(2) 主机宕机，宕机前有部分数据未能及时同步到从机，切换IP后还会引入数据不一致的问题，降低了系统的可用性。 <br>
　　(3) redis的主从复制采用全量复制，复制过程中主机会fork出一个子进程对内存做一份快照，并将子进程的内存快照保存为文件发送给从机，这一过程需要确保主机有足够多的空余内存。若快照文件较大，对集群的服务能力会产生较大的影响，而且复制过程是在从机新加入集群或者从机和主机网络断开重连时都会进行，也就是网络波动都会造成主机和从机间的一次全量的数据复制，这对实际的系统运营造成了不小的麻烦。 <br>
　　(4) Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。为避免这一问题，运维人员在系统上线时必须确保有足够的空间，这对资源造成了很大的浪费。

&emsp;&emsp; *应用场景：* <br>
　　(1) Top N List: 产品运营总会让你展示最近、最热、点击率最高、活跃度最高等等条件的top list。很多更新较频繁的列表如果使用MC+MySQL维护的话缓存失效的可能性会比较大，鉴于占用内存较小的情况，使用Redis做存储也是相当不错的。<br>
　　(2) Last Index: 用户最近访问记录也是redis list的很好应用场景，lpush lpop自动过期老的登陆记录，对于开发来说还是非常友好的。

3、**HBase** <br>
&emsp;&emsp; HBase是一个分布式的、面向列的开源数据库，该技术来源于 Fay Chang 所撰写的Google论文“Bigtable：一个结构化数据的分布式存储系统”。就像Bigtable利用了Google文件系统（File System）所提供的分布式数据存储一样，HBase在Hadoop之上提供了类似于Bigtable的能力。HBase是Apache的Hadoop项目的子项目。HBase不同于一般的关系数据库，它是一个适合于非结构化数据存储的数据库。另一个不同的是HBase基于列的而不是基于行的模式。

&emsp;&emsp; *Hbase的优点及应用场景：* <br>
　　(1) 半结构化或非结构化数据: 对于数据结构字段不够确定或杂乱无章非常难按一个概念去进行抽取的数据适合用HBase，因为HBase支持动态添加列。<br>
　　(2) 记录很稀疏：RDBMS的行有多少列是固定的。为null的列浪费了存储空间。HBase为null的Column不会被存储，这样既节省了空间又提高了读性能。<br>
　　(3) 多版本号数据：依据Row key和Column key定位到的Value能够有随意数量的版本号值，因此对于须要存储变动历史记录的数据，用HBase是很方便的。比方某个用户的Address变更，用户的Address变更记录也许也是具有研究意义的。<br>
　　(4) 仅要求最终一致性：对于数据存储事务的要求不像金融行业和财务系统这么高，只要保证最终一致性就行。（比如HBase+elasticsearch时，可能出现数据不一致）<br>
　　(5) 高可用和海量数据以及很大的瞬间写入量：WAL解决高可用，支持PB级数据，put性能高
适用于插入比查询操作更频繁的情况。比如，对于历史记录表和日志文件。（HBase的写操作更加高效）<br>
　　(6) 业务场景简单： 不需要太多的关系型数据库特性，列入交叉列，交叉表，事务，连接等。

&emsp;&emsp; *Hbase的缺点：* <br>
　　(1) 单一RowKey固有的局限性决定了它不可能有效地支持多条件查询; <br>
　　(2) 不适合于大范围扫描查询; <br>
　　(3) 不直接支持 SQL 的语句查询。


4、**Neo4J** <br>
&emsp;&emsp; Neo4j是一个高性能的,NOSQL图形数据库，它将结构化数据存储在网络上而不是表中。它是一个嵌入式的、基于磁盘的、具备完全的事务特性的Java持久化引擎，但是它将结构化数据存储在网络(从数学角度叫做图)上而不是表中。Neo4j也可以被看作是一个高性能的图引擎，该引擎具有成熟数据库的所有特性。程序员工作在一个面向对象的、灵活的网络结构下而不是严格、静态的表中——但是他们可以享受到具备完全的事务特性、企业级的数据库的所有好处。

#### 分布式数据库
1、**Greenplum** <br>
&emsp;&emsp; Greenplum主要由Master节点、Segment节点、interconnect三大部分组成。Greenplum master是Greenplum数据库系统的入口，接受客户端连接及提交的SQL语句，将工作负载分发给其它数据库实例（segment实例），由它们存储和处理数据。Greenplum interconnect负责不同PostgreSQL实例之间的通信。Greenplum segment是独立的PostgreSQL数据库，每个segment存储一部分数据。大部分查询处理都由segment完成。

&emsp;&emsp; *Greenplum的特点：*<br>
　　(1) 标准SQL接口，比MapReduce接入更方便
　　(2) 完整的分布式事务能力，确保强数据一致性
　　(3) 近乎线性的在线扩展能力
　　(4) 高并发数据加载技术
　　(5) 高灵活的行、列以及混合存储及压缩技术
　　(6) 高可用技术方案
　　(7) 支持多方式的授权管理及审计，表级别粒度
　　(8) 丰富的生态系统，便捷对接hadoop等

2、**TiDB** <br>
&emsp;&emsp; TiDB 是一个分布式 NewSQL数据库。它支持水平弹性扩展、ACID 事务、标准 SQL、MySQL 语法和 MySQL 协议，具有数据强一致的高可用特性，是一个不仅适合 OLTP 场景还适合 OLAP 场景的混合数据库。TiDB 兼容 MySQL，支持无限的水平扩展，具备强一致性和高可用性。TiDB 的目标是为OLTP和OLAP场景提供一站式的解决方案。TiDB 具备如下核心特点：<br>
　　*(1) 高度兼容 MySQL* <br>
&emsp;&emsp; 大多数情况下，无需修改代码即可从 MySQL 轻松迁移至 TiDB，分库分表后的 MySQL 集群亦可通过 TiDB 工具进行实时迁移。 <br>
　　*(2) 水平弹性扩展*  <br>
&emsp;&emsp; 通过简单地增加新节点即可实现 TiDB 的水平扩展，按需扩展吞吐或存储，轻松应对高并发、海量数据场景。 <br>
　　*(3) 分布式事务* <br>
&emsp;&emsp; TiDB 100% 支持标准的 ACID 事务。 <br>
　　*(4) 真正金融级高可用*  <br>
&emsp;&emsp; 相比于传统主从 (M-S) 复制方案，基于 Raft 的多数派选举协议可以提供金融级的 100% 数据强一致性保证，且在不丢失大多数副本的前提下，可以实现故障的自动恢复 (auto-failover)，无需人工介入。 <br>
　　*(5) 一站式 HTAP 解决方案*  <br>
&emsp;&emsp; TiDB 作为典型的 OLTP 行存数据库，同时兼具强大的 OLAP 性能，配合 TiSpark，可提供一站式 HTAP解决方案，一份存储同时处理OLTP & OLAP(OLAP、OLTP的介绍和比较 )无需传统繁琐的 ETL 过程。 <br>
　　*(6) 云原生 SQL 数据库*  <br>
&emsp;&emsp; TiDB 是为云而设计的数据库，同 Kubernetes （十分钟带你理解Kubernetes核心概念 ）深度耦合，支持公有云、私有云和混合云，使部署、配置和维护变得十分简单 <br>
&emsp;&emsp; TiDB 的设计目标是 100% 的 OLTP 场景和 80% 的 OLAP 场景，更复杂的 OLAP 分析可以通过 TiSpark 项目来完成。 TiDB 对业务没有任何侵入性，能优雅的替换传统的数据库中间件、数据库分库分表等 Sharding 方案。同时它也让开发运维人员不用关注数据库 Scale 的细节问题，专注于业务开发，极大的提升研发的生产力.

3、**Hive** <br>
&emsp;&emsp; Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供简单的sql查询功能，可以将sql语句转换为MapReduce任务进行运行。 其优点是学习成本低，可以通过类SQL语句快速实现简单的MapReduce统计，不必开发专门的MapReduce应用，十分适合数据仓库的统计分析。<br>
&emsp;&emsp; Hive是建立在 Hadoop 上的数据仓库基础构架。它提供了一系列的工具，可以用来进行数据提取转化加载（ETL），这是一种可以存储、查询和分析存储在 Hadoop 中的大规模数据的机制。Hive 定义了简单的类 SQL 查询语言，称为 HQL，它允许熟悉 SQL 的用户查询数据。同时，这个语言也允许熟悉 MapReduce 开发者的开发自定义的 mapper 和 reducer 来处理内建的 mapper 和 reducer 无法完成的复杂的分析工作。

*hive的优点:* <br>
　　(1) 简单容易上手：提供了类SQL查询语言HQL;<br>
　　(2) 可扩展：为超大数据集设计了计算/扩展能力（MR作为计算引擎，HDFS作为存储系统）一般情况下不需要重启服务Hive可以自由的扩展集群的规模; <br>
　　(3) 提供统一的元数据管理; <br>
　　(4) 延展性：Hive支持用户自定义函数，用户可以根据自己的需求来实现自己的函数; <br>
　　(5) 容错：良好的容错性，节点出现问题SQL仍可完成执行. <br>

*hive的缺点（局限性）:* <br>
　　(1)hive的HQL表达能力有限 <br>
　　1)迭代式算法无法表达，比如pagerank <br>
　　2)数据挖掘方面，比如kmeans

　　(2)hive的效率比较低 <br>
　　1)hive自动生成的mapreduce作业，通常情况下不够智能化 <br>
　　2)hive调优比较困难，粒度较粗 <br>
　　3)hive可控性差 <br>


4、**Hbase** <br>
&emsp;&emsp; 查看非关系型数据库中小节中HBase介绍。

### 数据仓库的集成性--ETL
&emsp;&emsp; 数据仓库中存储的数据大部分来源于传统的数据库，但并不是将原有数据简单的直接导入，而是需要进行预处理。这是因为事务型数据中的数据一般都是有噪声的、不完整的和数据形式不统一的。这些“脏数据”的直接导入将对在数据仓库基础上进行的数据挖掘造成混乱。“脏数据”在进入数据仓库之前必须经过抽取、清洗、转换（**ETL**）才能生成从面向事务转而面向主题的数据集合。数据集成是数据仓库建设中最重要，也是最为复杂的一步。<br>
&emsp;&emsp; **ETL（Extract-Transform-Load）** 用来描述将数据从来源端经过抽取（extract）、交互转换（transform）、加载（load）至目的端的过程。ETL负责将分布的、异构数据源中的数据如关系数据、平面数据文件等抽取到临时中间层后进行清洗、转换、集成，最后加载到数据仓库或数据集市中，成为联机分析处理、数据挖掘的基础。ETL是构建数据仓库的重要一环，用户从数据源抽取出所需的数据，经过数据清洗,最终按照预先定义好的数据仓库模型，将数据加载到数据仓库中去。

#### 常用的ETL工具
&emsp;&emsp; Informatica、Datastage、Kettle、ODI、OWB、微软DTS、Beeload

&emsp;&emsp; Datastage: 最专业的ETL工具，价格不菲，使用难度一般; <br>
&emsp;&emsp; Informatica: 专业程度如Datastage旗鼓相当，价格似乎比Datastage便宜; <br>
&emsp;&emsp; Kettle: 业界最有名的开源ETL工具。开源当然就免费，免费的有些东西使用就不是很方便; <br>
&emsp;&emsp; ODI: oracle数据库厂商提供的工具，有局限性，与oracle数据库耦合太深. <br>

#### ETL工具技术架构
&emsp;&emsp; ETL工具目前有两种技术架构——ETL架构和ELT架构:<br>
**ETL架构** <br>
![image](https://github.com/xiongjizhang/picture/blob/master/ETL.jpg?raw=true)
在ETL架构中，数据的流向是从源数据流到ETL工具，ETL工具是一个单独的数据处理引擎，一般会在单独的硬件服务器上，实现所有数据转化的工作，然后将数据加载到目标数据仓库中，如果要增加整个ETL过程的效率，则只能增强ETL工具服务器的配置，优化系统处理流程（一般可调的东西非常少）。IBM的datastage和Informatica的powercenter原来都是采用的这种架构。<br>
ETL架构的优势：<br>
&emsp;&emsp; ETL可以分担数据库系统的负载（采用单独的硬件服务器）<br>
&emsp;&emsp; ETL相对于EL-T架构可以实现更为复杂的数据转化逻辑 <br>
&emsp;&emsp; ETL采用单独的硬件服务器。 <br>
&emsp;&emsp; ETL与底层的数据库数据存储无关。 <br>

**ELT架构** <br>
![image](https://github.com/xiongjizhang/picture/blob/master/ELT.jpg?raw=true)
在ELT架构中，ELT只负责提供图形化的界面来设计业务规则，数据的整个加工过程都在目标和源的数据库之间流动，ELT协调相关的数据库系统来执行相关的应用，数据加工过程既可以在源数据库端执行，也可以在目标数据仓库端执行（主要取决于系统的架构设计和数据属性）。当ELT过程需要提高效率，则可以通过对相关数据库进行调优，或者改变执行加工的服务器就可以达到。一般数据库厂商会力推该种架构，像Oracle和Teradata都极力宣传ELT架构。<br>
ELT架构的优势：<br>
&emsp;&emsp; ELT主要通过数据库引擎来实现系统的可扩展性（尤其是当数据加工过程在晚上时，可以充分利用数据库引擎的资源）<br>
&emsp;&emsp; ELT可以保持所有的数据始终在数据库当中，避免数据的加载和导出，从而保证效率，提高系统的可监控性。<br>
&emsp;&emsp; ELT可以根据数据的分布情况进行并行处理优化，并可以利用数据库的固有功能优化磁盘I/O。<br>
&emsp;&emsp; ELT的可扩展性取决于数据库引擎和其硬件服务器的可扩展性。<br>
&emsp;&emsp; 通过对相关数据库进行性能调优，ETL过程获得3到4倍的效率提升一般不是特别困难。

#### 数据抽取方式
**增量方式**

**全量方式**

#### 数据的多样性

### 数据仓库的主题性--数据汇总统计

### 数据仓库的时变性--构建特殊表

## 商业智能 （Business Intelligence）
